# Feature Specification: Enterprise Project Portfolio Management for Oil, Gas & Energy

**Feature Branch**: `001-eppm-core-platform`  
**Created**: December 17, 2025  
**Status**: Draft  
**Input**: User description: “Research and detail User Stories for an Enterprise Project Portfolio Management application to fit the github speckit spec-template.md for Portfolio Manager, Finance Manager, Program Manager, and Project Manager roles with Norton & Kaplan Scorecard integration, Power BI reporting, and industry-specific KPIs for Oil, Gas & Energy sector”

<!--
  IMPORTANT: User stories should be PRIORITIZED as user journeys ordered by importance.
  Each user story/journey must be INDEPENDENTLY TESTABLE - meaning if you implement just ONE of them,
  you should still have a viable MVP (Minimum Viable Product) that delivers value.
  
  Assign priorities (P1, P2, P3, etc.) to each story, where P1 is the most critical.
  Think of each story as a standalone slice of functionality that can be:
  - Developed independently
  - Tested independently
  - Deployed independently
  - Demonstrated to users independently
-->

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Project Demand Creation and Submission (Priority: P1)

As a project manager, I need to create and submit demand requests for new projects or programs so that my initiatives can be evaluated and approved by the appropriate portfolio or program manager for my business unit.

**Why this priority**: This represents the fundamental entry point for all projects into the portfolio management system. Without the ability to create and submit demand, no other portfolio management activities can occur. This is the starting point of the value chain and must function independently before any approval workflows, reporting, or financial tracking can be implemented.

**Independent Test**: Can be fully tested by creating a demand request for a sample LNG project (such as a $10 billion Golden Pass-style facility), populating all required fields including capital allocation, expense categories, timeline, and expected value, then submitting it to a designated portfolio manager. The test delivers value by confirming that demand can be captured with complete information from inception and routed to the correct decision-maker.

**Acceptance Scenarios**:

1. **Given** I am a project manager in the Major Capital Projects business unit, **When** I create a new demand request for an LNG facility project with estimated capital of $10 billion, 5-year timeline, and expected NPV of $2.8 billion, **Then** the system captures all financial data, categorizes it under Major Capital Projects portfolio, and routes it to the designated portfolio manager for that business unit.
1. **Given** I am creating demand for an AI-driven predictive maintenance program, **When** I enter expense categories specific to IT (software licenses: $2.5M, cloud infrastructure: $1.8M, development: $4.2M, integration: $1.5M, training: $800K), **Then** the system accepts IT-specific expense categories and calculates total expense of $10.8M.
1. **Given** I have entered all required demand information including project description, business case, risk assessment, resource requirements (internal: 45 FTEs, external contractors: 120 FTEs), and strategic alignment, **When** I submit the demand, **Then** the system validates completeness, assigns a unique demand ID, timestamps the submission, and sends notification to the appropriate portfolio or program manager.
1. **Given** I am submitting demand for a pipeline project in the Upstream Oil & Gas program, **When** I specify construction expense breakdown (labor: 45%, miscellaneous: 30%, materials: 18%, right-of-way: 7%), **Then** the system accepts construction-specific categories totaling 100% and validates against industry standard ranges.
1. **Given** my submitted demand has been rejected once with reason “postponed,” **When** I resubmit the same demand with updated business justification, **Then** the system increments the rejection count to 1, maintains the history of the previous rejection reason, and allows resubmission to the same or different approver.

-----

### User Story 2 - Balanced Scorecard Configuration and KPI Definition (Priority: P1)

As a portfolio manager, I need to create a Norton & Kaplan Balanced Scorecard with industry-specific KPIs across financial, customer satisfaction, operational efficiency, and internal development perspectives so that I can measure portfolio performance against strategic objectives.

**Why this priority**: The Balanced Scorecard establishes the strategic measurement framework that all portfolio decisions will be evaluated against. This must exist before projects can be selected or performance can be measured. It provides the fundamental criteria for investment decisions and creates the foundation for all reporting and analysis activities.

**Independent Test**: Can be fully tested by configuring a complete scorecard for an Upstream Oil & Gas portfolio with specific targets (Financial: ROCE 15%, Production Cost $9/BOE; Customer: Delivery Program Index 95%; Operational: TRIR 0.8, Equipment Uptime 92%, Project Delivery Performance 85%; Learning: Training Hours per Employee 60, Succession Coverage 90%), then validating that the system captures all KPIs with baseline values and target thresholds. The test delivers independent value by confirming strategic objectives are properly defined and measurable.

**Acceptance Scenarios**:

1. **Given** I am managing an Upstream Oil & Gas portfolio, **When** I create a new Balanced Scorecard and define Financial perspective KPIs (ROCE target: 15%, Production Cost per BOE: $9, Free Cash Flow: $850M annually, Net Debt to Capital: <20%), **Then** the system creates the scorecard structure, assigns each KPI to the Financial perspective, and stores target values with appropriate units of measure.
1. **Given** I am configuring the Customer perspective, **When** I add KPIs for Delivery Program Index (target: 95%), Stakeholder Engagement Score (target: 4.2/5.0), Market Share in LNG exports (target: 18%), and Community Relations Index (target: 85%), **Then** the system accepts customer-focused metrics and validates that target values fall within reasonable industry ranges.
1. **Given** I am setting up the Internal Business Process perspective, **When** I configure Safety metrics (TRIR target: 0.8 per 200,000 hours, LTIR target: 0.4), Production efficiency (Equipment Uptime: 92%, Unplanned Downtime: <5%), and Project Delivery (On-time/budget/scope: 85%, Average Cost Overrun: <15%), **Then** the system organizes these into subcategories (Safety, Production, Project Delivery) and applies appropriate calculation formulas.
1. **Given** I am establishing Learning & Growth KPIs, **When** I enter metrics for workforce development (Training Investment: $15M annually, Training Hours per Employee: 60, Digital Skills Coverage: 75%, Competency Gap Closure: 80%, Succession Planning Coverage: 90%, Employee Engagement Score: 4.0/5.0, Voluntary Turnover: <8%), **Then** the system captures all development metrics and links them to the Learning perspective.
1. **Given** I have fully configured my Balanced Scorecard with 28 KPIs across all four perspectives, **When** I specify that this scorecard applies to my Integrated Oil & Gas portfolio with $25 billion in managed capital, **Then** the system associates the scorecard with the portfolio, sets the effective date, and enables tracking of actual performance against targets.

-----

### User Story 3 - Annual Financial Baseline Approval and Lock (Priority: P1)

As a finance manager, I need to approve annual scorecard descriptions, targets, capital allocations, and expense allocations and save them as an immutable baseline as of the approval date so that we have a fixed point of comparison for all subsequent variance analysis and performance measurement.

**Why this priority**: Financial baselines provide the control framework for the entire portfolio. Without approved baselines, there is no way to measure variance, assess change requests, or determine if portfolios are performing as planned. This is a foundational governance control that must exist before any financial tracking, reporting, or change management can function properly.

**Independent Test**: Can be fully tested by reviewing a proposed annual plan for a Major Capital Projects portfolio ($12 billion capital, $3.8 billion operating expense across engineering, procurement, construction categories, with Balanced Scorecard targets), approving it on a specific date, then verifying the baseline is locked (cannot be edited, only queried or deleted), timestamped, and version-controlled. The test delivers value by confirming financial governance controls are enforced and audit trails are maintained.

**Acceptance Scenarios**:

1. **Given** I am reviewing a proposed annual plan for the Major Capital Projects portfolio with total capital allocation of $12 billion and operating expense of $3.8 billion broken into Engineering & Design (10%, $380M), Procurement (52%, $1.976B), Construction (38%, $1.444B), **When** I approve the plan on January 15, 2026, **Then** the system creates an immutable baseline record with approval timestamp, captures my user ID as approver, locks all financial values from editing, and sets baseline status to “Approved.”
1. **Given** the baseline includes Balanced Scorecard targets (ROCE: 18%, TRIR: 0.6, Project Delivery: 87%, Training Hours: 65), **When** I approve the baseline, **Then** the system captures all KPI targets as baseline values, preserves the targets alongside financial allocations, and enables future actual-vs-baseline variance reporting.
1. **Given** I have approved a baseline for the IT & Digital Transformation portfolio with $850M capital and expense categories specific to technology (Software Licenses: $145M, Cloud Infrastructure: $220M, Development: $285M, Integration: $125M, Training: $75M), **When** a user attempts to modify any baseline value after approval, **Then** the system prevents the edit, displays a message indicating the baseline is locked, and suggests creating a change request instead.
1. **Given** multiple portfolios exist under my management (Upstream: $8B, Downstream: $5.5B, Chemicals: $3.2B, Digital: $850M), **When** I approve all four baselines with different approval dates, **Then** the system maintains separate baseline records for each portfolio with distinct timestamps, allows independent querying of each baseline, and tracks baseline versions if annual re-baselining occurs.
1. **Given** an approved baseline exists from January 15, 2026, **When** I query baseline data on June 30, 2026, **Then** the system returns all baseline values exactly as approved (capital, expense by category, scorecard targets) with the original approval date and approver information, demonstrating that baseline data remains unchanged and queryable for historical analysis.
1. **Given** business conditions require abandoning an approved baseline, **When** I delete the baseline record with appropriate authorization and documented justification, **Then** the system marks the baseline as deleted (soft delete with audit trail), retains the historical record for compliance, prevents reuse of the same baseline period, and requires creation of a new baseline before portfolio execution can proceed.

-----

### User Story 4 - Project and Program Selection from Submitted Demand (Priority: P2)

As a portfolio manager, I need to review and select projects and programs from the demand submitted by program and project managers for approval so that I can build a portfolio aligned with strategic objectives and within approved capital and expense constraints.

**Why this priority**: Project selection is the core value-add activity of portfolio management, directly determining which investments receive funding and proceed to execution. This must follow baseline approval (P1) but is more critical than monitoring activities since it shapes the portfolio composition. Selection decisions have multi-billion dollar implications and determine strategic direction.

**Independent Test**: Can be fully tested by presenting a portfolio manager with five demand requests totaling $18 billion against an approved baseline of $12 billion capital, requiring selection of a subset that maximizes strategic value while staying within budget. Test includes approving three projects ($11.2B), rejecting one ($4.5B), and deferring one ($2.3B), then verifying approved projects transition to planning status, rejected projects are flagged appropriately, and portfolio utilization is tracked. The test delivers value by demonstrating prioritization logic and budget enforcement.

**Acceptance Scenarios**:

1. **Given** I have five submitted demand requests in my Upstream Oil & Gas portfolio (Offshore Platform: $4.2B NPV $1.8B, LNG Expansion: $6.5B NPV $2.1B, Pipeline Extension: $2.3B NPV $680M, Enhanced Recovery: $3.8B NPV $1.4B, Drilling Optimization AI: $1.2B NPV $580M) and my approved baseline provides $12B capital allocation, **When** I evaluate all demands and select the LNG Expansion, Enhanced Recovery, and Drilling Optimization AI projects totaling $11.5B, **Then** the system approves these three projects, transitions their status from “Submitted” to “Approved - Planning,” allocates $11.5B of my $12B budget, and shows remaining available capital of $500M.
1. **Given** I am reviewing demand against my Balanced Scorecard strategic priorities (increase ROCE to 18%, improve safety to TRIR 0.6, achieve 87% project delivery performance), **When** I filter demands by strategic alignment score, **Then** the system ranks projects by contribution to scorecard objectives, highlights projects with highest strategic fit, and provides recommendation scoring based on NPV, strategic alignment, risk-adjusted return, and resource availability.
1. **Given** a submitted demand for a $4.5B petrochemical plant has insufficient business case justification, **When** I reject the demand with reason “Insufficient business case - resubmit with updated market analysis,” **Then** the system sets demand status to “Rejected,” increments rejection count to 1, records my rejection reason and timestamp, notifies the submitting project manager, and returns the $4.5B to my available capital pool.
1. **Given** I want to defer a $2.3B pipeline project to next fiscal year due to regulatory uncertainty, **When** I reject the demand with reason “Postponed - regulatory permits pending, resubmit in Q3 2026,” **Then** the system categorizes the rejection as “postponed,” allows the project manager to resubmit after the specified date, maintains the full demand specification for easy reactivation, and does not count this as a quality rejection against the project manager’s submission record.
1. **Given** I select projects that require specific resource pools (petroleum engineers: 180, construction supervisors: 45, drilling specialists: 32) against my available resources (petroleum engineers: 220, construction supervisors: 50, drilling specialists: 28), **When** I attempt to approve projects that exceed drilling specialist capacity, **Then** the system warns me of the resource constraint, shows the 4-person shortage, allows me to proceed with override and documented justification, and flags the resource gap for HR planning.

-----

### User Story 5 - Program-Level Demand Approval Workflow (Priority: P2)

As a program manager, I need to approve or reject demand requests submitted by project managers for projects within my program area, with the ability to specify rejection reasons (no fit, postponed, duplicate with reference, other with explanation) so that I can control which projects enter my program and maintain program coherence.

**Why this priority**: Program-level approval creates the first governance filter, ensuring projects align with program objectives before reaching portfolio-level review. This reduces portfolio manager workload by filtering out misaligned or duplicate requests early. It must follow demand creation (P1) but precedes portfolio selection, establishing a two-tier approval hierarchy critical for large enterprises managing hundreds of project requests.

**Independent Test**: Can be fully tested by submitting three project demands to a program manager (one aligned with program objectives, one duplicate of existing project, one misaligned with program scope), then approving the aligned project, rejecting the duplicate with reference to existing project ID, and rejecting the misaligned project with explanation. Verify approved project proceeds to portfolio manager queue, rejected projects notify submitters with reasons, and rejection counts increment. The test delivers value by demonstrating quality control and governance separation between program and portfolio layers.

**Acceptance Scenarios**:

1. **Given** I manage the Downstream Refining & Petrochemicals program and receive demand for a $3.2B propylene production facility with strong alignment to program objectives (expand petrochemical value chain, 18% IRR, utilizes existing infrastructure), **When** I approve the demand, **Then** the system changes status from “Submitted to Program” to “Approved by Program - Pending Portfolio Review,” routes the demand to my portfolio manager’s approval queue, maintains full demand specification, and notifies both the submitting project manager and portfolio manager of the approval.
1. **Given** I receive demand for an AI-powered catalyst optimization system valued at $45M, **When** I review and find this duplicates an existing approved project (Project ID: DRP-2025-0847 “Refinery AI Optimization Platform” with overlapping scope), I reject with reason “Duplicate - see Project ID DRP-2025-0847,” **Then** the system sets status to “Rejected by Program,” increments rejection count to 1, records the rejection reason with project reference link, and suggests to the submitter that they coordinate with the existing project team rather than creating redundant initiative.
1. **Given** I receive demand for a renewable diesel facility that does not fit my Downstream Refining & Petrochemicals program scope (belongs in Renewable Energy program instead), **When** I reject with reason “No fit - please resubmit to Renewable Energy program,” **Then** the system rejects the demand, provides rejection metadata including suggested target program, allows the project manager to resubmit to the correct program without losing demand data, and does not penalize the rejection count since it was a routing error.
1. **Given** demand is submitted for a $1.8B alkylation unit expansion but current oil market volatility creates uncertainty about petrochemical margins, **When** I reject with reason “Postponed - resubmit when benzene-naphtha spread stabilizes above $200/tonne for two consecutive quarters,” **Then** the system categorizes as “postponed,” sets a conditional trigger for resubmission, retains full demand specification for later reactivation, and creates a reminder for the project manager to monitor market conditions.
1. **Given** a project manager submits inadequately developed demand with missing financial analysis, **When** I reject with reason “Other - insufficient cost-benefit analysis, missing CAPEX breakdown by engineering/procurement/construction phases and NPV sensitivity analysis,” **Then** the system captures the detailed rejection explanation, increments rejection count to 1, provides the feedback to the project manager for demand refinement, and allows resubmission once deficiencies are addressed.
1. **Given** I have approved 12 projects and rejected 8 projects (3 no fit, 2 postponed, 2 duplicate, 1 other) over a quarterly period, **When** I view my program approval metrics, **Then** the system shows approval rate of 60%, breakdown of rejection reasons, average time to decision (e.g., 4.2 business days), and tracks whether rejected projects were successfully resubmitted and approved in subsequent cycles.

-----

### User Story 6 - Capital and Expense Allocation to Portfolios (Priority: P2)

As a finance manager, I need to decide and allocate specific amounts of capital and operating expense to each of my portfolios for planning and execution phases so that portfolio managers have clear budget envelopes within which to select and manage projects.

**Why this priority**: Capital allocation establishes the financial constraints within which all portfolio and project decisions must operate. This must follow baseline approval (P1) but is equally critical as project selection since it determines the total investment capacity. Without clear allocations, portfolio managers cannot make informed selection decisions or manage to budget.

**Independent Test**: Can be fully tested by allocating $28 billion total capital across four portfolios (Upstream: $12B, Downstream: $8.5B, Petrochemicals: $5.2B, Digital Transformation: $2.3B) with distinct operating expense budgets, then verifying each portfolio manager can see their allocation, the sum equals total available capital, allocations can be adjusted with proper authorization, and allocation changes create audit trails. The test delivers value by demonstrating budget governance and multi-portfolio financial management.

**Acceptance Scenarios**:

1. **Given** I have total approved capital of $28 billion and operating expense budget of $9.2 billion for fiscal year 2026, **When** I allocate capital to four portfolios (Upstream Oil & Gas: $12B capital + $3.8B opex, Downstream Refining: $8.5B capital + $2.9B opex, Petrochemicals: $5.2B capital + $1.8B opex, Digital Transformation: $2.3B capital + $700M opex), **Then** the system validates total allocated capital equals $28B, total opex equals $9.2B, prevents over-allocation, assigns budgets to respective portfolio managers, and sets allocation effective date.
1. **Given** I am allocating operating expense to the Major Capital Projects portfolio, **When** I specify construction-related expense categories (Engineering & Design: $380M, Procurement: $1.52B, Construction: $1.14B, Commissioning: $420M, Regulatory Compliance: $180M, Environmental & Safety: $160M), **Then** the system accepts construction-specific categories totaling $3.8B, validates categories are appropriate for Major Capital Projects portfolio type, and makes these categories available for project-level expense tracking.
1. **Given** I am allocating budget to the IT & Digital Transformation portfolio, **When** I specify technology-related expense categories (Software Licenses: $175M, Cloud Infrastructure: $245M, Development & Integration: $185M, Cybersecurity: $55M, Training & Change Management: $40M), **Then** the system accepts IT-specific categories totaling $700M, prevents the portfolio from using construction categories, and enforces category alignment with portfolio type.
1. **Given** business conditions change mid-year requiring reallocation, **When** I reduce Digital Transformation capital allocation from $2.3B to $1.9B and increase Upstream allocation from $12B to $12.4B (moving $400M between portfolios), **Then** the system validates I have appropriate authorization level for reallocation, creates change request documentation, updates both portfolio allocations simultaneously to maintain balance, notifies affected portfolio managers, creates audit trail of the reallocation with justification, and triggers review of affected projects in Digital portfolio.
1. **Given** I want to reserve contingency funding, **When** I allocate $26B to portfolios and hold $2B as unallocated strategic reserve, **Then** the system tracks $26B as allocated, $2B as strategic reserve, prevents portfolio managers from accessing reserve funds without approval, and provides mechanism for releasing reserve funds through formal approval process.
1. **Given** portfolios have different planning and execution phase requirements, **When** I allocate $4B to Upstream portfolio with phase breakdown (Planning Phase: $600M for FEED and FEL studies, Execution Phase: $3.4B for construction and commissioning), **Then** the system tracks allocations by phase, releases planning phase funds immediately, holds execution phase funds until projects pass Final Investment Decision gate, and reports utilization by phase separately.

-----

### User Story 7 - Portfolio Performance Dashboard in Power BI (Priority: P3)

As a portfolio manager, I need a comprehensive Power BI performance report showing all submitted, approved, planning, executing, and closed projects and programs with breakdowns by capital, expense (by category), value delivered (savings or revenue increase), progress percentage, and resource allocation (internal and external) so that I can monitor portfolio health and make informed management decisions.

**Why this priority**: Performance reporting enables monitoring and course correction but is lower priority than establishing scorecards, baselines, and approval workflows (P1-P2). Reporting delivers value only after there are approved projects generating performance data to display. However, it is more critical than portfolio control actions (holds, change requests) since visibility must precede intervention decisions.

**Independent Test**: Can be fully tested by populating the system with 15 sample projects across all lifecycle stages (3 submitted, 4 approved/planning, 5 executing, 3 closed) with realistic Oil & Gas financial data, then validating the Power BI dashboard displays accurate aggregations by status, correct capital vs. expense breakdowns, progress calculations (earned value), resource utilization percentages, and provides drill-down from portfolio to project level. The test delivers value by confirming executive visibility into multi-billion dollar portfolio performance.

**Acceptance Scenarios**:

1. **Given** my Upstream Oil & Gas portfolio contains 15 projects with total capital of $11.2B (Submitted: $2.8B, Approved/Planning: $3.1B, Executing: $4.7B, Closed: $600M), **When** I view the Portfolio Performance Dashboard, **Then** the Power BI report displays a status funnel showing project count and value by status, capital allocation bar chart with color-coding by status, and summary cards showing total portfolio value, number of projects, overall progress (45%), and remaining budget ($500M).
1. **Given** my executing projects have varying expense compositions (LNG Facility: Engineering 8%, Procurement 52%, Construction 40%; Offshore Platform: Engineering 12%, Procurement 48%, Construction 40%), **When** I view expense breakdown analysis, **Then** the dashboard displays stacked bar charts showing expense by category for each project, portfolio-level expense category totals (Engineering: $1.1B, Procurement: $5.8B, Construction: $4.5B), and compares actual category percentages against industry benchmarks.
1. **Given** projects are delivering different types of value (LNG Export Revenue Increase: $420M annually, Drilling Optimization Savings: $85M annually, Predictive Maintenance Savings: $45M annually, Emissions Reduction: 2.4M tonnes CO2e avoided), **When** I filter the dashboard to show value realization, **Then** the report displays value by type (revenue increase vs. cost savings vs. environmental impact), shows cumulative value delivered ($550M annually), compares against business case projections, and highlights projects over/under-delivering value.
1. **Given** my portfolio utilizes both internal resources (petroleum engineers: 180/220 allocated, project managers: 45/52, geologists: 28/35) and external contractors (engineering contractors: 450 FTEs, construction: 2,800 FTEs), **When** I view resource allocation analysis, **Then** the dashboard shows resource utilization heat map by skill type, identifies over-allocated roles (petroleum engineers at 82% utilization nearing capacity), displays contractor spend by project, and forecasts resource constraints for next quarter.
1. **Given** I need to drill down into individual project performance, **When** I click on the “Whiptail Offshore Development” project currently executing at $4.2B planned value, **Then** the dashboard navigates to project detail view showing Earned Value Management metrics (PV: $2.1B, EV: $1.89B, AC: $2.05B), cost performance index (CPI: 0.92 indicating 8% over budget), schedule performance index (SPI: 0.90 indicating 10% behind schedule), estimate at completion ($4.56B, 8.6% over budget), and key milestone status with critical path items highlighted.
1. **Given** I want to understand portfolio-level trends, **When** I view the time-series analysis page, **Then** the dashboard displays S-curves showing planned value, earned value, and actual cost trending over 24 months, portfolio health score trending (currently 73/100), monthly capital expenditure actuals vs. plan, and variance explanations for significant deviations (e.g., Q2 2026 spike due to offshore platform delivery).

-----

### User Story 8 - Program Manager Performance Reporting with Security Trimming (Priority: P3)

As a program manager, I need access to a Power BI performance report similar to the Finance and Portfolio Manager dashboards but security-trimmed to show only projects and programs within my ownership scope so that I can monitor my program without seeing confidential information from other programs.

**Why this priority**: Program-level reporting is important for program governance but lower priority than portfolio-level reporting (P3) since programs are a subset of portfolios. Security trimming is critical for confidentiality but is a variation of existing reporting capability rather than net-new functionality, making it equal priority to portfolio dashboards.

**Independent Test**: Can be fully tested by configuring row-level security in Power BI to filter data by program manager ownership, then logging in as the Downstream Refining program manager and verifying the dashboard shows only the 8 projects in that program ($8.2B total) while hiding the 12 projects in Upstream program ($11.2B). Test includes attempting to access filtered data and confirming access is denied, validating aggregations are correct for visible scope, and verifying drill-down maintains security context. The test delivers value by demonstrating enterprise-grade data security and role-based access.

**Acceptance Scenarios**:

1. **Given** I am the Downstream Refining & Petrochemicals program manager responsible for 8 projects totaling $8.2B capital across three statuses (Planning: 2 projects $2.1B, Executing: 5 projects $5.6B, Closed: 1 project $500M), **When** I access the Program Performance Dashboard, **Then** the Power BI report displays only my 8 projects with accurate aggregations, shows my program total capital of $8.2B, hides all other program data, and maintains identical visualization layout to portfolio manager dashboard for consistency.
1. **Given** the system contains 47 total projects across five programs but I own only the Digital Transformation program with 6 AI/ML projects, **When** I attempt to view project details for a project in the Upstream program (Project ID: UPS-2025-0234), **Then** the dashboard denies access, displays an appropriate message (“You do not have access to this project”), does not reveal any project details through error messages, and logs the access attempt for security audit.
1. **Given** my Downstream program includes a confidential next-generation refining technology project ($850M), **When** other program managers view their dashboards, **Then** the system ensures they cannot see my confidential project in any aggregation, filtering, or drill-down path, maintains complete data isolation between programs, and prevents inference of confidential project data through aggregate calculations.
1. **Given** I need to analyze expense breakdown for my program, **When** I view expense category analysis, **Then** the dashboard shows only my program’s expense across construction categories (Engineering & Design: $280M, Procurement: $1.45B, Construction: $1.22B, Commissioning: $310M), calculates percentages based on my program total ($3.26B), compares against my program baseline and industry benchmarks, and does not include expense data from other programs.
1. **Given** I manage resources specific to my program (chemical engineers: 45, process engineers: 38, EPC contractors: 850 FTEs), **When** I view resource utilization, **Then** the dashboard displays only resources allocated to my program, shows utilization percentages against my program’s resource pool, identifies bottlenecks within my program (chemical engineers at 93% utilization), and allows me to request additional resources through the system without seeing other programs’ resource data.
1. **Given** I have both submitted a demand request as a project manager AND manage a program as program manager (dual role scenario), **When** I switch context between my project manager view and program manager view using role selector, **Then** the dashboard dynamically adjusts security trimming to show either my submitted projects (project manager context) or my program’s projects (program manager context), maintains security boundaries for each role, and logs all role context switches for audit.

-----

### User Story 9 - Real-Time Financial Statements for Portfolio Aggregation (Priority: P3)

As a finance manager, I need to view consolidated balance sheet, cash flow statement, and income statement for the total of my portfolios that updates in real-time in Power BI so that I can understand the financial position and performance of my entire capital program and make timely financial decisions.

**Why this priority**: Real-time financial consolidation provides strategic visibility but is lower priority than baseline approval and allocation (P1-P2) since financial statements are meaningless without approved budgets and active projects. However, financial visibility is critical for governance and is prioritized equally with performance dashboards as a monitoring capability.

**Independent Test**: Can be fully tested by creating transactions across four portfolios (capital expenditures, operating expenses, value realization from completed projects, asset additions, depreciation) over a quarter, then verifying the Power BI financial statements accurately consolidate across portfolios in real-time (within 5 minutes of transaction posting), show correct balance sheet totals ($28B assets under construction, $7.2B cash, $15.8B equity, $12.4B debt), cash flow from investing activities, and income statement impact from operational projects. The test delivers value by demonstrating CFO-level financial visibility and control.

**Acceptance Scenarios**:

1. **Given** my four portfolios have collectively spent $6.8B capital year-to-date across multiple projects, **When** I view the consolidated Balance Sheet in Power BI, **Then** the report displays Assets Under Construction of $6.8B (Work in Progress), Cash & Equivalents reduced by net capital expenditure, Total Assets of $34.2B including operational assets from prior years, Equity of $21.8B, Debt of $12.4B, and validates Assets = Liabilities + Equity with real-time data refresh within 5 minutes of the latest transaction.
1. **Given** the Upstream portfolio just approved a $450M equipment purchase order and the transaction posted to SAP at 2:14 PM, **When** I refresh my Power BI financial dashboard at 2:18 PM, **Then** the balance sheet reflects the $450M increase in Assets Under Construction (Procurement category), cash reduced by any deposit paid, and accounts payable increased by the purchase commitment, demonstrating real-time data integration from ERP systems.
1. **Given** operating expenses across all portfolios totaled $2.1B in Q1 broken down by category (Engineering: $210M, Procurement: $1.15B, Construction: $630M, Other: $110M), **When** I view the Income Statement, **Then** the report displays Project Development Expense of $2.1B, shows expense breakdown by category, compares against approved baseline of $2.3B showing favorable variance of $200M, and calculates expense as percentage of total portfolio value (7.5%).
1. **Given** three projects have completed and transitioned to operations (LNG Train 3: generating $380M annual revenue, Offshore Platform Delta: $285M annual revenue, Pipeline Extension: $45M cost savings), **When** I view operational impact on the Income Statement, **Then** the report shows Revenue from Operational Projects of $665M, Operating Income contribution, and separates operational financial impact from projects still under construction, allowing me to track value realization from completed capital investments.
1. **Given** my portfolios have complex cash flows (capital expenditures: -$6.8B, asset disposals: +$320M, debt financing: +$2.1B, equity contribution: +$800M, working capital changes: -$180M, operational cash flow from completed projects: +$850M), **When** I view the Cash Flow Statement, **Then** the report accurately categorizes flows into Operating Activities (+$850M - $180M), Investing Activities (-$6.8B + $320M), and Financing Activities (+$2.1B + $800M), calculates net change in cash position (-$2.9B), and reconciles to balance sheet cash balance with real-time accuracy.
1. **Given** I need to analyze financial trends, **When** I view the 12-month trending page, **Then** the dashboard displays monthly capital expenditure run-rate (averaging $1.13B/month), cumulative spend vs. baseline S-curve, cash burn rate trending, projected cash requirements for next two quarters based on committed project schedules, and provides early warning indicators if cash reserves will fall below minimum threshold ($1.5B) within forecast period.

-----

### User Story 10 - Portfolio Hold and Suspension Capability (Priority: P4)

As a portfolio manager, I need the ability to put projects and programs on hold within my portfolio so that I can temporarily suspend work due to funding constraints, risk events, regulatory issues, or strategic reprioritization while preserving project data for potential reactivation.

**Why this priority**: Portfolio control actions are important risk management tools but lower priority (P4) than visibility capabilities (P3) since you must be able to see portfolio performance before intervening to control it. Hold capability is reactive rather than proactive and is less frequently used than approval workflows and reporting. However, it must exist before change request workflows since holds often trigger the need for budget reallocation.

**Independent Test**: Can be fully tested by placing a $2.3B pipeline project currently in execution status on hold due to regulatory permitting delay, verifying the system stops budget consumption, flags resources as available for reallocation, maintains all project data and history, sends notifications to project team and stakeholders, updates portfolio dashboards to show held status, and allows later reactivation with documented justification. The test delivers value by demonstrating risk mitigation and portfolio flexibility.

**Acceptance Scenarios**:

1. **Given** my Upstream portfolio contains a $2.3B pipeline project (Project ID: UPS-2025-0445) currently in Executing status with $680M spent to date and 140 FTEs assigned, **When** I place the project on hold due to “Regulatory - EPA permit delayed pending additional environmental impact study,” **Then** the system changes project status to “On Hold,” stops all budget authorization for new commitments, flags the 140 FTEs as available for reallocation, returns unspent budget of $1.62B to my available capital pool, records hold reason and date, sends notifications to project manager and all team members, and updates portfolio dashboard to show one project on hold.
1. **Given** I am placing an AI predictive maintenance program on hold due to “Strategic reprioritization - focusing capital on core production assets,” **When** I initiate the hold, **Then** the system prevents new purchase orders or contractor assignments, completes in-flight transactions already committed, preserves all project documentation (business case, technical specs, procurement contracts, earned value data), maintains project team assignments in suspended state, creates a project hold record with my justification, and sets a required review date (e.g., quarterly) to reassess hold status.
1. **Given** a $4.7B LNG expansion project on hold for 8 months has resolved its regulatory issues, **When** I reactivate the project with justification “EPA permit granted on 05/15/2026, construction can resume,” **Then** the system changes status from “On Hold” to “Executing,” restores budget authority ($4.1B remaining), flags resource requirements to HR for team reassembly (petroleum engineers: 45, construction supervisors: 28, contractors: 850), recalculates schedule based on 8-month delay, updates baseline if formal change request approved, and triggers project restart checklist (site mobilization, contractor reactivation, updated safety training).
1. **Given** multiple projects are on hold consuming different levels of resources, **When** I view my portfolio capacity, **Then** the dashboard distinguishes between resources actively allocated (petroleum engineers: 135/220 active), resources on held projects (petroleum engineers: 45 on hold, potentially available), and truly available resources (petroleum engineers: 40 unallocated), allowing me to make informed decisions about resource reallocation from held to active projects.
1. **Given** a project has been on hold for 18 months beyond the original anticipated hold duration, **When** the system reaches the hold review threshold, **Then** it automatically triggers a hold status review, notifies me as portfolio manager with recommendation to either reactivate or formally cancel the project, provides updated business case context (oil prices, regulatory environment, strategic fit), and requires documented decision within 30 days to either reactivate, extend hold with new justification, or proceed to cancellation.
1. **Given** I need to understand financial impact of held projects, **When** I view portfolio financial reports, **Then** the system separates financial metrics for active projects vs. held projects, shows sunk costs in held projects ($680M in the pipeline example), calculates opportunity cost of capital tied up in held projects, displays potential savings from early cancellation vs. cost to maintain hold status, and provides decision support data for hold-vs-cancel analysis.

-----

### User Story 11 - Program Manager Change Request Approval (Priority: P4)

As a program manager, I need to approve or reject change requests submitted by project managers for projects within my program so that I can maintain control over scope, schedule, and budget changes while ensuring program-level coherence and preventing unauthorized project modifications.

**Why this priority**: Change request approval is an important governance control but lower priority (P4) than baseline establishment, project selection, and monitoring (P1-P3). Change management is reactive, handling deviations from plan rather than establishing the plan itself. It must follow the hold capability since holds often generate change requests, but both are portfolio control mechanisms of similar priority.

**Independent Test**: Can be fully tested by submitting three change requests for projects in a program (one minor scope change under $500K, one major schedule delay requiring $2.8M additional funding, one reduction in scope saving $1.2M), then verifying the program manager can review each with full impact analysis, approve the minor change at program level, escalate the major change to portfolio manager, reject the scope reduction with justification, and confirm all decisions create audit trails and trigger appropriate notifications. The test delivers value by demonstrating multi-tier change control governance.

**Acceptance Scenarios**:

1. **Given** I manage the Downstream Refining program and receive a change request from the Alkylation Unit Expansion project (baseline: $850M, 24 months) requesting “Add sulfuric acid regeneration unit due to new environmental regulations - scope change +$380K, schedule impact +6 weeks,” **When** I review the change request with impact analysis showing cost increase of 0.4% and minimal schedule impact, **Then** I can approve at program level since it falls within my approval authority threshold (<$500K), the system updates project baseline to $850.38M and extends completion date by 6 weeks, notifies project manager of approval, adjusts program-level aggregations, and creates change log entry.
1. **Given** I receive a major change request for the Refinery AI Optimization project requesting “Expand scope to include all 12 production units instead of original 6 units - additional $2.8M capital, +8 months schedule extension, requires 15 additional data scientists,” **When** I determine this change exceeds my approval authority ($2M threshold) and has program-wide implications, **Then** the system allows me to add my program-level review and recommendation, escalates the change request to my portfolio manager for final decision, attaches program impact assessment (affects resource sharing with 2 other projects, delays program integration milestone by 3 months), and tracks escalation in change workflow history.
1. **Given** a project manager submits a change request to reduce scope by eliminating a planned technology feature to save $1.2M and 4 months, **When** I review and determine this elimination would reduce strategic value and compromise integration with other program projects, **Then** I reject the change request with documented reason “Scope reduction compromises program integration architecture and reduces strategic value below acceptable threshold,” the system returns the change to submitted status, notifies the project manager with my detailed feedback, prevents baseline modification, and suggests alternative approaches to address the project manager’s underlying cost or schedule concerns.
1. **Given** I need to review change request impact across my program portfolio, **When** I access the program change management dashboard, **Then** the system displays all pending change requests (currently 7 pending), shows aggregate impact if all approved (program cost +$4.2M, schedule +3 months to critical path), categorizes changes by type (regulatory: 3, scope enhancement: 2, cost savings: 1, risk mitigation: 1), highlights changes requiring escalation, and provides program-level health metrics if changes are approved vs. rejected.
1. **Given** a change request affects interfaces between projects in my program (Project A change affects deliverables consumed by Project B), **When** I review the change, **Then** the system automatically identifies interface dependencies, flags Project B as impacted, requires impact assessment from Project B manager before I can approve Project A change, consolidates both assessments into a single change decision workflow, and ensures both projects update baselines consistently to maintain program coherence.
1. **Given** change requests accumulate over time, **When** I analyze change patterns for continuous improvement, **Then** the system provides change analytics showing most frequent change drivers (regulatory changes: 35%, scope creep: 28%, schedule optimization: 20%, cost reduction: 12%, other: 5%), identifies projects with excessive change volume (flags projects with >10 changes as requiring review), calculates change approval cycle time (average 5.2 days in my program), and highlights opportunities to improve initial project definition to reduce downstream changes.

-----

### User Story 12 - Portfolio Manager Change Request Approval for Financial Rebalancing (Priority: P4)

As a portfolio manager, I need to approve change requests that affect portfolio-level financials and benefits so that I can rebalance capital and expense allocations across projects while maintaining alignment with approved baselines and strategic objectives.

**Why this priority**: Portfolio-level change approval is a governance control of equal priority (P4) to program-level change approval, as both are reactive portfolio management activities. Portfolio change approval handles larger financial impacts and cross-project implications but occurs less frequently. It must follow reporting capabilities since change impact analysis requires visibility into current portfolio status.

**Independent Test**: Can be fully tested by submitting a major change request requiring $3.2B budget increase for an LNG project due to cost escalation, approving it with documented justification, then verifying the system reallocates capital from the strategic reserve or other projects, updates portfolio baselines and forecasts, maintains audit trail of the rebalancing decision, triggers stakeholder notifications, and updates financial dashboards to reflect the new portfolio composition. The test delivers value by demonstrating executive-level financial governance and accountability.

**Acceptance Scenarios**:

1. **Given** my Upstream portfolio has an approved baseline of $12B capital and I receive an escalated change request from the Qatar-style LNG expansion project requesting additional $3.2B capital due to “Steel and construction labor cost escalation 28% above original estimates, plus scope enhancement for carbon capture integration,” **When** I review the change with full financial impact analysis showing project cost increasing from $10B to $13.2B and portfolio capital requirement exceeding baseline by $3.2B, **Then** I can approve the change with documented business justification, specify funding source (reallocate $1.8B from postponed pipeline project + release $1.4B from strategic reserve), update both project and portfolio baselines, record the rebalancing decision with approval date, and notify finance manager of portfolio baseline modification.
1. **Given** a change request affects portfolio-level benefits realization (Predictive Maintenance AI scope reduction would decrease annual savings from $85M to $62M, a $23M/year impact), **When** I evaluate whether the reduced benefits still justify the investment and decide to reject the scope reduction change, **Then** the system maintains original project scope and benefits baseline of $85M annual savings, records my rejection with reason “Benefits reduction of $23M annually makes project NPV fall below portfolio hurdle rate of 12% - maintain full scope or cancel project,” returns decision to program and project managers, and preserves portfolio-level benefits forecast at original baseline.
1. **Given** multiple change requests create cumulative portfolio impact (5 projects requesting total +$4.7B capital increase, 3 projects requesting -$1.9B reductions, net portfolio increase +$2.8B), **When** I review changes in aggregate portfolio context, **Then** the system provides portfolio impact summary showing net capital change of +$2.8B, displays revised portfolio total of $14.8B vs. $12B baseline (23% increase), calculates impact on portfolio-level KPIs (ROCE decreases from projected 18% to 16.2%), allows me to approve changes selectively to stay within acceptable variance thresholds, and creates consolidated change package for finance manager review.
1. **Given** I approve a change that requires resource rebalancing (moving 25 petroleum engineers from a postponed project to an accelerated LNG project), **When** I document the reallocation decision, **Then** the system updates resource assignments across both projects, notifies HR and project managers of the resource transfer, maintains utilization tracking showing petroleum engineers remain at 82% portfolio-wide utilization, adjusts resource forecasts for both projects, and records the resource rebalancing rationale in the change audit trail.
1. **Given** change requests have schedule implications affecting strategic milestones (LNG first production delayed from Q3 2028 to Q1 2029 due to carbon capture scope addition), **When** I approve the change, **Then** the system cascades the schedule change to portfolio-level milestones, updates portfolio master schedule showing revised critical path, recalculates portfolio-level schedule performance index, identifies downstream impacts on commercial commitments (LNG offtake agreements), flags stakeholder communications required (Board notification of strategic milestone delay), and integrates the revised schedule into portfolio forecasts.
1. **Given** I need governance oversight of change management effectiveness, **When** I view portfolio change metrics, **Then** the system displays aggregate change statistics (total approved changes: $6.2B or 51% of original baseline, average approval cycle time: 12 days, change approval rate: 68%, most common change drivers), compares my portfolio change performance against peer portfolios and industry benchmarks (industry average: 38% baseline growth, my portfolio: 51% indicating potential estimating issues), and provides recommendations for improving front-end project definition to reduce change volume.

-----

### User Story 13 - Remaining Capital, Expense, and Resource Allocation View (Priority: P5)

As a portfolio manager, I need to see my remaining available capital, operating expense budget, and allocatable resources so that I can understand my capacity to approve additional demand or changes and make informed decisions about portfolio capacity utilization.

**Why this priority**: Capacity visibility is important for planning but lower priority (P5) than active portfolio management activities (approvals, monitoring, control). This is largely a reporting capability that aggregates data from other higher-priority features. It provides decision support rather than executing decisions, making it valuable but not critical for minimum viable product.

**Independent Test**: Can be fully tested by approving multiple projects that consume budget and resources, then verifying the dashboard accurately calculates remaining capital ($500M of $12B available), remaining expense by category (Engineering: $45M of $380M, Procurement: $280M of $1.52B, Construction: $195M of $1.14B), and available resources by skill type (petroleum engineers: 40 of 220 unallocated, drilling specialists: -4 indicating over-allocation), with real-time updates as new approvals occur. The test delivers value by demonstrating capacity management and constraint identification.

**Acceptance Scenarios**:

1. **Given** my Upstream portfolio has approved baseline of $12B capital and I have approved projects totaling $11.5B, **When** I view the Portfolio Capacity Dashboard, **Then** the system displays total capital allocation ($12B), committed capital ($11.5B), remaining available capital ($500M or 4.2%), utilization percentage (95.8%), and provides visual indicator (amber warning when utilization >90%, red when >98%) that I am approaching full capital allocation.
1. **Given** my operating expense baseline includes construction categories (Engineering: $380M, Procurement: $1.52B, Construction: $1.14B) and approved projects have consumed varying amounts by category (Engineering: $335M spent/committed, Procurement: $1.24B, Construction: $945M), **When** I view expense capacity by category, **Then** the dashboard shows category-level detail with remaining budget (Engineering: $45M or 11.8% remaining, Procurement: $280M or 18.4%, Construction: $195M or 17.1%), highlights Engineering as most constrained category, and warns if new demand requires Engineering spend that would exceed remaining budget.
1. **Given** my portfolio approved baseline includes resource capacity (petroleum engineers: 220, project managers: 52, geologists: 35, drilling specialists: 28, construction supervisors: 50) and current allocations show (petroleum engineers: 180 active + 40 unallocated, drilling specialists: 32 committed - 28 available = 4 over-allocated), **When** I view resource capacity, **Then** the dashboard displays resource heat map showing petroleum engineers (82% utilized, green), drilling specialists (114% utilized, red flag), identifies that I cannot approve additional projects requiring drilling specialists without hiring or reallocating, and shows that petroleum engineer capacity allows for projects requiring up to 40 additional engineers.
1. **Given** I am evaluating new demand worth $2.1B against my remaining capital of $500M, **When** I perform “what-if” analysis on the capacity dashboard, **Then** the system shows I have insufficient capital to approve the demand fully, calculates shortfall of $1.6B, provides options to request additional allocation from finance manager, suggests alternative phasing (approve Phase 1 for $480M now, defer Phase 2 pending next fiscal year allocation), and models impact of the decision on portfolio capacity utilization.
1. **Given** I need to understand capacity trending over time, **When** I view the 12-month capacity utilization forecast, **Then** the dashboard projects capital utilization by quarter based on committed project spend curves (Q1 2026: 45%, Q2: 68%, Q3: 87%, Q4: 96%), identifies when I will reach capacity constraints (Q3 2026 based on current commitments), forecasts resource utilization trending (petroleum engineers peak at 94% in Q2 2026), and provides early warning that I should slow new project approvals in Q2 to avoid over-commitment in Q3.
1. **Given** portfolio capacity is constrained and I need to prioritize demand, **When** I view demand queue with capacity overlay, **Then** the system ranks pending demand requests by strategic value score and resource efficiency (NPV per resource unit), highlights which demand fits within remaining capacity (2 projects totaling $480M and requiring 35 petroleum engineers fit current capacity), identifies which demand would require capacity expansion (4 projects totaling $6.8B exceed available capital by $6.3B), and provides decision support for prioritizing demand approval based on capacity constraints.

-----

### User Story 14 - Financial Scenario Planning with PESTLE Analysis (Priority: P5)

As a finance manager, I need to run scenarios on portfolio compositions and KPIs that incorporate forward-looking PESTLE analysis factors specific to the Oil, Gas & Energy industry so that I can understand how political, economic, social, technological, legal, and environmental changes might impact portfolio performance and make risk-informed investment decisions.

**Why this priority**: Scenario planning is valuable for strategic risk management but lowest priority (P5) as it is a planning and analysis tool rather than operational execution capability. It requires all other features (baselines, approvals, reporting) to be in place before scenarios can be modeled meaningfully. It is a “nice to have” optimization feature rather than core portfolio management functionality.

**Independent Test**: Can be fully tested by creating three scenarios for an Upstream portfolio (Scenario 1: Oil prices $85/bbl with moderate regulations, Scenario 2: Oil prices $55/bbl with stringent carbon pricing $100/tonne, Scenario 3: Oil prices $70/bbl with technology breakthrough reducing costs 15%), modeling the impact on portfolio NPV, ROCE, and project viability under each scenario, and comparing results to identify most resilient projects and portfolio composition adjustments needed. The test delivers value by demonstrating strategic planning and risk management capabilities.

**Acceptance Scenarios**:

1. **Given** I need to evaluate how oil price volatility affects my $28B portfolio, **When** I create three price scenarios (Base Case: Brent $70/bbl, Optimistic: $85/bbl, Pessimistic: $55/bbl) and model portfolio NPV impact, **Then** the system calculates portfolio NPV for each scenario (Base: $8.2B, Optimistic: $11.8B, Pessimistic: $3.6B), identifies which projects fall below hurdle rate in pessimistic scenario (4 projects with IRR <8% at $55 oil become non-viable), highlights portfolio resilience percentage (65% of projects remain economically viable across all scenarios), and recommends portfolio rebalancing toward resilient projects.
1. **Given** new carbon pricing regulations may impose $40-120/tonne CO2 costs, **When** I model PESTLE Legal/Environmental scenario with carbon pricing at $80/tonne affecting high-emission projects, **Then** the system applies carbon cost to project economics based on emissions profiles (LNG project: +$280M carbon cost over life, Offshore platform: +$420M, AI optimization reducing emissions: -$85M savings), recalculates project NPVs with carbon costs (LNG NPV drops from $2.1B to $1.82B), identifies projects most vulnerable to carbon pricing (conventional oil development IRR drops from 14% to 9.2%), and suggests prioritizing lower-carbon projects and carbon capture integration.
1. **Given** technology breakthrough scenarios may reduce costs, **When** I model a PESTLE Technological scenario where “AI-driven drilling optimization reduces well completion costs by 15% industry-wide,” **Then** the system applies cost reduction to relevant projects (7 drilling-intensive projects see capex reduction totaling $1.8B), recalculates portfolio economics with improved returns (portfolio ROCE increases from 16% to 18.5%), identifies strategic advantage if our portfolio has higher drilling exposure (42% of projects are drilling-intensive vs. 28% industry average), and recommends accelerating AI adoption to capture first-mover benefits.
1. **Given** geopolitical scenarios affect project feasibility, **When** I model PESTLE Political scenario “US sanctions restrict equipment exports for 3 international projects, delaying FID by 18 months,” **Then** the system delays affected project cash flows, recalculates time value of money impact (NPV reduction of $680M due to delay), models portfolio schedule with delayed projects (portfolio first oil delayed from Q2 2028 to Q4 2028), identifies supply chain dependencies requiring diversification (critical equipment from sanctioned regions: $2.4B procurement at risk), and recommends geographic portfolio diversification to reduce geopolitical concentration risk.
1. **Given** workforce demographics create execution risk, **When** I model PESTLE Social scenario “40,000 worker shortage by 2025 increases labor costs 18% and extends schedules 22%,” **Then** the system applies labor cost escalation to construction-intensive projects (5 projects see capex increase totaling $2.9B), extends project schedules proportionally (average 8-month delay), recalculates portfolio economics with higher costs and delays (portfolio IRR drops from 16% to 13.2%), identifies resource bottlenecks (petroleum engineers, drilling supervisors most constrained), and recommends workforce development programs, automation investments, and strategic hiring to mitigate scenario impact.
1. **Given** I need to compare multiple scenarios simultaneously, **When** I view the scenario comparison dashboard, **Then** the system displays side-by-side comparison of key metrics across scenarios (Portfolio NPV: Base $8.2B, Best $14.1B, Worst $2.1B; ROCE: Base 16%, Best 21%, Worst 8%; Projects at risk: Base 0, Best 0, Worst 9 of 23), calculates portfolio resilience score (weighted probability-adjusted NPV: $7.6B considering scenario likelihoods), identifies portfolio optimization recommendations (divest 3 low-resilience projects, accelerate 5 high-resilience projects, add carbon capture to 4 vulnerable projects), and provides Monte Carlo simulation incorporating probability distributions of PESTLE factors for risk-adjusted portfolio valuation.

-----

### User Story 15 - Financial Model Creation with Monthly Targets (Priority: P5)

As a finance manager, I need to create a financial model with monthly targets for capital expenditure, operating expense (broken down by business-unit-specific categories), and value realization so that I can establish detailed performance benchmarks and track portfolio financial performance at a granular level.

**Why this priority**: Detailed financial modeling is valuable for precision management but lowest priority (P5) as it is a refinement of annual baseline approval (P1). Monthly targets provide better tracking but are not essential for basic portfolio governance. This is an optimization feature that enhances financial management but is not required for minimum viable product.

**Independent Test**: Can be fully tested by creating a monthly financial model for Major Capital Projects portfolio with capital targets by month ($800M January, $950M February reflecting seasonal construction cycles, ramping to $1.2B peak summer months), expense by category and month (Engineering front-loaded Q1-Q2, Procurement Q2-Q3, Construction Q3-Q4), and value realization milestones (LNG first production Q3 2028 delivering $380M annual revenue), then validating the system enforces monthly targets, alerts when actual spending deviates >15% from monthly plan, and provides variance explanations. The test delivers value by demonstrating financial precision and early warning capabilities.

**Acceptance Scenarios**:

1. **Given** I am creating a financial model for the Major Capital Projects portfolio with $12B annual capital budget, **When** I distribute capital targets across 12 months based on project schedules and seasonal construction patterns (January: $800M, February: $950M, March-May: $1.1B/month peak engineering procurement, June-August: $1.2B/month peak construction, September-November: $950M/month, December: $600M holiday slowdown), **Then** the system creates monthly capital targets totaling $12B annually, validates monthly distribution aligns with seasonal industry patterns, allows me to adjust individual months while maintaining annual total, and provides visualization of capital spend curve over the year.
1. **Given** I need to model operating expense by category and month, **When** I create monthly expense targets for construction categories specific to Major Capital Projects (Engineering & Design: front-loaded with $45M monthly Jan-April totaling $180M, then declining to $15M monthly May-December totaling $200M = $380M annual; Procurement: ramping from $80M monthly Jan-March to peak $180M monthly Apr-Aug to $110M monthly Sep-Dec totaling $1.52B; Construction: low $40M monthly Jan-Apr, peak $150M monthly May-Sep, declining to $80M Oct-Dec totaling $1.14B), **Then** the system accepts category-specific monthly profiles, validates each category sum equals annual baseline, maintains category integrity (prevents using construction categories for IT portfolio), and provides monthly expense forecast by category.
1. **Given** I am modeling the IT & Digital Transformation portfolio with different expense categories, **When** I create monthly targets for technology-specific categories (Software Licenses: level $14.6M monthly for $175M annual subscription costs; Cloud Infrastructure: ramping from $15M monthly to $25M monthly as systems scale totaling $245M; Development: front-loaded $22M monthly Jan-Jun, then $12M monthly Jul-Dec totaling $185M), **Then** the system recognizes IT-specific category patterns (subscription costs are level, development is front-loaded, infrastructure scales with usage), prevents applying construction monthly patterns to IT categories, and maintains category-appropriate modeling.
1. **Given** I need to model value realization timing, **When** I enter monthly value targets aligned with project completion milestones (LNG Train 3 first production August 2028: $0 value Jan-Jul 2028, $32M monthly Aug-Dec 2028 totaling $160M year 1, $380M annually thereafter; Predictive Maintenance AI go-live March 2027: $0 value Jan-Feb 2027, $7M monthly Mar-Dec 2027 totaling $70M year 1, $85M annually thereafter), **Then** the system creates value realization curves tied to project milestones, calculates cumulative value over time, compares actual value delivery against monthly targets as projects complete, and provides early warning if projects delay and value realization shifts.
1. **Given** actual spending in March 2026 is $1.38B vs. monthly target of $1.1B (25% over budget), **When** the monthly variance exceeds the 15% threshold, **Then** the system generates automated variance alert to me as finance manager, requires documented explanation for the variance (e.g., “Accelerated procurement of long-lead items for Q3 LNG delivery - timing difference, will offset in April-May with lower spend”), tracks variance explanations for audit, and flags persistent variances (>15% for 3 consecutive months) as requiring corrective action or baseline revision.
1. **Given** I need to analyze financial performance trends, **When** I view the monthly financial performance dashboard, **Then** the system displays actual vs. target capital expenditure by month with variance highlighting (green <5% variance, amber 5-15%, red >15%), cumulative spend tracking showing year-to-date actual $6.2B vs. target $6.0B (3% favorable), category-level monthly tracking showing Procurement 8% over monthly plan but Engineering 15% under plan, rolling 3-month forecast showing projected year-end spend of $12.3B vs. $12B baseline (2.5% overrun), and provides drill-down to project-level detail explaining portfolio-level monthly variances.

-----

### Edge Cases

- What happens when a portfolio manager attempts to approve projects totaling $14B against an approved baseline of $12B and the finance manager has not released additional capital allocation?
- How does the system handle a change request that affects multiple portfolios (e.g., shared service project supporting both Upstream and Downstream operations requiring cost allocation across portfolios)?
- What occurs when a project manager submits demand to the wrong program and it gets approved by the wrong program manager before the error is discovered?
- How does the system prevent double-counting when a project is part of multiple programs (e.g., a digital transformation initiative supporting both refining operations and petrochemical production)?
- What happens when a program manager and portfolio manager simultaneously approve conflicting change requests for the same project?
- How does the system handle resource over-allocation when multiple portfolio managers approve projects requiring the same scarce specialists (e.g., 40 petroleum engineers needed but only 28 available across enterprise)?
- What occurs when Power BI real-time financial statements attempt to refresh during a large batch import from SAP (15,000 transactions posting simultaneously) causing potential data consistency issues?
- How does the system manage scenario analysis when PESTLE factors interact (e.g., high oil prices typically correlate with increased carbon regulation pressure, creating compound effects on project economics)?
- What happens when a project on hold for 24 months needs reactivation but key resources have been reassigned to other projects and are no longer available?
- How does the system handle baseline deletion when the baseline has dependent approved projects, committed contracts, and historical actuals recorded against it?
- What occurs when monthly financial targets are missed by >15% for six consecutive months, triggering mandatory baseline revision, but portfolio manager disputes the need for revision claiming timing differences will resolve?
- How does the system prevent gaming of rejection reasons (e.g., program manager always marking rejections as “postponed” to avoid quality metrics showing high “no fit” rejections)?
- What happens when security-trimmed Power BI reports are accessed by a user with dual roles (both program manager and portfolio manager) creating ambiguity about which security context should apply?
- How does the system handle fractional resource allocation when a petroleum engineer is split 60% to Project A (Upstream portfolio) and 40% to Project B (Downstream portfolio) affecting capacity calculations across portfolios?
- What occurs when approved annual scorecard targets become unachievable mid-year (e.g., ROCE target of 18% but oil prices collapse to $45/bbl making target impossible) requiring target revision vs. baseline lock integrity?

## Requirements *(mandatory)*

### Functional Requirements

#### Demand Management

- **FR-001**: System MUST allow project managers to create demand requests with complete project information including financial data (capital, expense by category), timeline, expected value (NPV, IRR, payback period), resource requirements (internal FTEs by skill type, external contractors), risk assessment, strategic alignment scores, and business case justification.
- **FR-002**: System MUST validate that all required demand fields are populated before allowing submission, with field requirements varying by business unit type (Major Capital Projects requires construction expense categories, IT portfolios require technology expense categories).
- **FR-003**: System MUST route submitted demand to the appropriate portfolio manager or program manager based on business unit categorization, maintain demand status workflow (Draft, Submitted, Under Review, Approved, Rejected), and provide unique demand identifiers with timestamp tracking.
- **FR-004**: System MUST support demand resubmission after rejection, incrementing rejection count, preserving rejection history with reasons and timestamps, and maintaining all prior versions of the demand specification for audit purposes.
- **FR-005**: System MUST categorize expense by business-unit-specific categories, validating that Major Capital Projects portfolios use construction categories (Engineering & Design, Procurement, Construction, Commissioning, Regulatory Compliance, Environmental & Safety) while IT portfolios use technology categories (Software Licenses, Cloud Infrastructure, Development & Integration, Cybersecurity, Training & Change Management).

#### Balanced Scorecard & KPI Management

- **FR-006**: System MUST support creation of Norton & Kaplan Balanced Scorecard with four perspectives (Financial, Customer, Internal Business Process, Learning & Growth), allowing portfolio managers to define industry-specific KPIs for each perspective with baseline values, target values, units of measure, calculation formulas, and threshold definitions (green/amber/red indicators).
- **FR-007**: System MUST provide pre-configured Oil & Gas industry KPI templates including Financial (ROCE, Production Cost per BOE, Free Cash Flow, Net Debt to Capital, EBITDA Margin), Customer (Delivery Program Index, Stakeholder Engagement Score, Market Share, Community Relations Index), Internal Process (TRIR, LTIR, Equipment Uptime, Unplanned Downtime, Project Delivery Performance, Average Cost Overrun), and Learning (Training Hours per Employee, Digital Skills Coverage, Competency Gap Closure, Succession Planning Coverage, Employee Engagement Score, Voluntary Turnover).
- **FR-008**: System MUST associate Balanced Scorecards with specific portfolios, track multiple scorecards per portfolio over time (annual scorecard versions), and enable comparison of actual performance against scorecard targets with variance analysis.
- **FR-009**: System MUST validate that KPI target values fall within industry-reasonable ranges based on benchmarks (e.g., ROCE typically 10-25%, TRIR typically 0.5-2.0 per 200,000 hours, Project Delivery Performance typically 70-90%).

#### Financial Baseline Management

- **FR-010**: System MUST allow finance managers to review and approve annual portfolio plans including capital allocation, operating expense allocation by category, and Balanced Scorecard targets, creating immutable baseline records upon approval.
- **FR-011**: System MUST capture baseline approval with timestamp, approver user ID, approval justification, and effective date, then lock all baseline values from further editing while maintaining full queryability for variance analysis and audit.
- **FR-012**: System MUST enforce baseline immutability, preventing any modification to approved baseline values and redirecting users attempting edits to the change request process for baseline revisions.
- **FR-013**: System MUST support baseline deletion with appropriate authorization controls (finance manager level or above), implementing soft delete that retains historical records, maintains audit trail, and prevents reuse of deleted baseline periods.
- **FR-014**: System MUST maintain baseline versions when annual re-baselining occurs, tracking version history with effective dates, allowing comparison between baseline versions, and preserving prior baselines for multi-year trend analysis.
- **FR-015**: System MUST support multiple concurrent baselines for different portfolios, each with independent approval dates, distinct allocations, and separate KPI targets, allowing portfolio-specific governance without cross-portfolio interference.

#### Project & Program Selection

- **FR-016**: System MUST allow portfolio managers to review submitted demand with multi-criteria analysis including NPV, IRR, strategic alignment scores, risk-adjusted returns, resource requirements vs. availability, and contribution to Balanced Scorecard objectives.
- **FR-017**: System MUST enforce budget constraints during project selection, validating that total approved project capital does not exceed portfolio baseline allocation, calculating remaining available budget in real-time, and warning portfolio managers when approaching budget capacity (>90% utilization).
- **FR-018**: System MUST transition approved demand from “Submitted” status to “Approved - Planning” status, allocate budget from portfolio available capital to project committed capital, assign resources from portfolio capacity to project allocations, and trigger notifications to project managers and stakeholders.
- **FR-019**: System MUST support demand rejection with structured rejection reasons (insufficient business case, regulatory uncertainty, market conditions unfavorable, strategic misalignment, resource constraints, other with free text), record rejection timestamp and approver, increment rejection count, and notify submitting project manager with detailed feedback.
- **FR-020**: System MUST distinguish between different rejection types for analytics purposes, categorizing rejections as quality issues (no fit, insufficient justification) vs. timing issues (postponed, regulatory pending) vs. duplicates (reference to existing project), and tracking resubmission success rates by rejection type.
- **FR-021**: System MUST provide portfolio optimization decision support, ranking demand by multiple criteria (NPV/capital efficiency, strategic fit score, resource efficiency, risk-adjusted return), identifying optimal project portfolio combinations within budget constraints, and highlighting trade-offs between competing demands.

#### Program-Level Approval Workflow

- **FR-022**: System MUST implement two-tier approval hierarchy where program managers approve/reject demand before it reaches portfolio managers, with program-level approval routing demand to portfolio manager queue and program-level rejection returning demand to project manager with feedback.
- **FR-023**: System MUST allow program managers to reject demand with structured reasons (no fit with program scope, postponed with conditions, duplicate referencing existing project ID, other with detailed explanation), maintaining reason metadata for analytics and continuous improvement.
- **FR-024**: System MUST detect duplicate demand by comparing project title, scope keywords, business unit, and cost magnitude, flagging potential duplicates for program manager review, and facilitating linking rejected duplicates to existing approved projects.
- **FR-025**: System MUST track program-level approval metrics including approval rate, average time to decision, rejection reason distribution, resubmission success rate, and demand quality scores, providing program managers with performance dashboards for process improvement.

#### Capital & Expense Allocation

- **FR-026**: System MUST allow finance managers to allocate total available capital and operating expense across multiple portfolios, validating that sum of portfolio allocations equals total available funding, preventing over-allocation, and maintaining allocation audit trail.
- **FR-027**: System MUST support portfolio-specific expense category definitions, allowing Major Capital Projects portfolios to use construction categories while IT portfolios use technology categories, preventing category cross-contamination between portfolio types.
- **FR-028**: System MUST enable mid-year reallocation of capital and expense between portfolios with appropriate authorization (finance manager approval required), creating change documentation, updating both source and destination portfolio allocations simultaneously, and notifying affected portfolio managers of allocation changes.
- **FR-029**: System MUST support strategic reserve funding, allowing finance managers to hold unallocated capital separate from portfolio allocations, controlling release of reserve funds through formal approval process, and tracking reserve utilization over fiscal year.
- **FR-030**: System MUST distinguish between planning phase allocation and execution phase allocation, releasing planning funds immediately upon baseline approval, holding execution funds until projects pass Final Investment Decision gate, and tracking utilization by phase independently.

#### Performance Reporting & Dashboards

- **FR-031**: System MUST provide Power BI performance dashboards for portfolio managers showing all projects aggregated by status (submitted, approved/planning, executing, closed), with financial breakdowns by capital vs. expense, expense by category, budget vs. actual with variance, and forecast to complete.
- **FR-032**: System MUST display Earned Value Management metrics including Planned Value (PV), Earned Value (EV), Actual Cost (AC), Cost Performance Index (CPI = EV/AC), Schedule Performance Index (SPI = EV/PV), Cost Variance (CV = EV - AC), Schedule Variance (SV = EV - PV), Estimate at Completion (EAC), Estimate to Complete (ETC), and Variance at Completion (VAC).
- **FR-033**: System MUST visualize progress using S-curves showing cumulative PV, EV, and AC over time, status funnel charts showing project counts and values by status, budget waterfall charts showing baseline to actual reconciliation with variance explanations, and milestone Gantt charts with critical path highlighting.
- **FR-034**: System MUST track value realization by type (revenue increase, cost savings, environmental impact), compare actual value delivered against business case projections, show value realization timing against plan, and aggregate value across portfolio with drill-down to project level.
- **FR-035**: System MUST display resource allocation showing utilization by skill type (e.g., petroleum engineers: 180/220 allocated = 82% utilization), split by internal FTEs vs. external contractors, identify over-allocated roles (>100% utilization), and forecast resource constraints for upcoming quarters based on project schedules.
- **FR-036**: System MUST enable multi-level drill-down from portfolio aggregate view to program view to individual project view to work package level, maintaining consistent visualization style across hierarchy levels and preserving filter context as users navigate between levels.
- **FR-037**: System MUST refresh dashboard data from source systems (Primavera P6 for schedules, SAP/ERP for financials, HRIS for resources) with configurable refresh frequency (daily for executive dashboards, hourly for operational dashboards, near-real-time for critical financial views).

#### Security-Trimmed Reporting

- **FR-038**: System MUST implement row-level security in Power BI dashboards based on user roles and ownership, ensuring program managers see only projects within their program scope, portfolio managers see only projects within their portfolio scope, and finance managers see all portfolios under their management.
- **FR-039**: System MUST prevent data leakage through aggregate calculations, ensuring users cannot infer confidential project details from portfolio totals, filtering out unauthorized data before aggregation, and validating that all drill-down paths maintain security context.
- **FR-040**: System MUST support role-based access control with hierarchical permissions (Finance Manager > Portfolio Manager > Program Manager > Project Manager), allowing higher roles to access data of lower roles within their organizational scope, and maintaining separation between parallel organizational units.
- **FR-041**: System MUST log all security-trimmed data access attempts including successful accesses and denied attempts, capturing user ID, timestamp, data attempted, and security rule that denied access for audit and compliance purposes.
- **FR-042**: System MUST support users with multiple roles (e.g., both Program Manager and Portfolio Manager), allowing role context switching with explicit role selector, maintaining separate security contexts for each role, and logging all role context switches for audit.

#### Real-Time Financial Statements

- **FR-043**: System MUST generate consolidated financial statements (Balance Sheet, Income Statement, Cash Flow Statement) for total portfolio aggregation, updating in real-time (within 5 minutes) as transactions post to source ERP systems.
- **FR-044**: Balance Sheet MUST show Assets Under Construction (work in progress on capital projects), Cash & Equivalents, Total Assets including operational assets from prior years, Equity, Debt, and validate Assets = Liabilities + Equity with drill-down to project-level asset details.
- **FR-045**: Income Statement MUST distinguish between project development expense (capital projects still under construction), revenue from operational projects (completed projects generating cash flows), operating income, and separate financial impact of projects under construction from operational projects.
- **FR-046**: Cash Flow Statement MUST categorize cash flows into Operating Activities (operational cash flow from completed projects, working capital changes), Investing Activities (capital expenditures, asset disposals), and Financing Activities (debt financing, equity contributions), reconciling to balance sheet cash balance.
- **FR-047**: System MUST provide 12-month trending analysis of financial metrics including monthly capital expenditure run-rate, cumulative spend vs. baseline S-curve, cash burn rate trending, projected cash requirements based on committed project schedules, and early warning indicators when cash reserves approach minimum thresholds.

#### Portfolio Hold & Suspension

- **FR-048**: System MUST allow portfolio managers to place projects on hold with documented reason (regulatory delay, funding constraints, risk event, strategic reprioritization, market conditions), immediately stopping new budget authorizations while allowing in-flight committed transactions to complete.
- **FR-049**: System MUST flag resources on held projects as potentially available for reallocation, return unspent budget from held projects to portfolio available capital pool, preserve all project documentation and history in suspended state, and maintain project team assignments in inactive status.
- **FR-050**: System MUST set automatic hold review thresholds (e.g., quarterly review required, maximum 18-month hold duration), trigger notifications to portfolio managers when review thresholds approach, and require documented decision to reactivate, extend hold, or cancel project.
- **FR-051**: System MUST support project reactivation from hold status with documented justification, restore budget authority for remaining project scope, flag resource requirements for team reassembly, recalculate project schedule based on hold duration, and trigger project restart checklist.
- **FR-052**: System MUST distinguish between active project resources, held project resources (potentially available), and unallocated resources in capacity calculations, allowing portfolio managers to make informed resource reallocation decisions based on true availability vs. theoretical capacity.

#### Change Request Management

- **FR-053**: System MUST allow project managers to submit change requests with complete impact analysis including scope change description, capital impact, expense impact by category, schedule impact, resource impact, risk impact, and business justification for the change.
- **FR-054**: System MUST route change requests through hierarchical approval workflow based on financial magnitude, with program managers approving changes under authority threshold (e.g., <$500K), portfolio managers approving changes under their threshold (e.g., <$5M), and executive committee approving changes exceeding portfolio manager authority.
- **FR-055**: System MUST identify interface dependencies when change requests affect multiple projects, automatically notifying dependent project managers, requiring consolidated impact assessment across dependent projects, and ensuring coordinated baseline updates across all affected projects.
- **FR-056**: System MUST support change request approval with baseline update (updating project budget, schedule, scope, and resource allocation), change request rejection with feedback (returning to submitter with documented reason), and change request escalation (forwarding to higher approval authority with lower-level review and recommendation).
- **FR-057**: System MUST track cumulative change impact at portfolio level, showing aggregate budget change (approved changes totaling +$4.7B capital increase), schedule impact (critical path delayed 3 months), and portfolio-level KPI impact (ROCE decreases from 18% to 16.2% due to cost increases without proportional value increase).
- **FR-058**: System MUST provide change management analytics including change frequency by project, most common change drivers (regulatory, scope enhancement, cost savings, risk mitigation), average change approval cycle time, change approval rate, and change impact correlation with initial project definition quality.

#### Portfolio Capacity Management

- **FR-059**: System MUST calculate remaining available capital in real-time as portfolio managers approve projects, showing total allocation, committed capital, remaining capital, utilization percentage, and visual indicators when approaching capacity thresholds (>90% amber warning, >98% red alert).
- **FR-060**: System MUST track remaining operating expense by category, calculating category-level utilization (e.g., Engineering: $335M spent of $380M baseline = 88% utilized, $45M remaining), identifying most constrained categories, and warning when new demand would exceed category remaining budget.
- **FR-061**: System MUST maintain resource capacity tracking by skill type, calculating utilization percentages (e.g., petroleum engineers: 180 allocated / 220 available = 82% utilized), identifying over-allocated skills (>100% utilization), and forecasting capacity constraints based on approved project resource curves.
- **FR-062**: System MUST support “what-if” capacity analysis, allowing portfolio managers to model impact of approving pending demand against current capacity, calculating shortfalls (capital shortfall, resource shortfall), and suggesting alternatives (phased approval, reallocation from other projects, request additional allocation).
- **FR-063**: System MUST forecast capacity utilization trending over 12 months based on committed project spend curves and resource loading, projecting when capacity thresholds will be reached, providing early warning of impending constraints (3-month advance notice), and recommending demand pacing to avoid over-commitment.

#### Scenario Planning & PESTLE Analysis

- **FR-064**: System MUST support creation of multiple scenarios with different PESTLE factor assumptions including Political (regulatory changes, sanctions, policy shifts), Economic (oil prices, interest rates, currency), Social (workforce availability, social license), Technological (cost reduction breakthroughs, new capabilities), Legal (carbon pricing, environmental regulations), and Environmental (emissions limits, climate risks).
- **FR-065**: System MUST model portfolio impact under each scenario by applying PESTLE factor changes to project economics, recalculating portfolio NPV, ROCE, IRR, and project viability under scenario assumptions, and identifying projects that fall below hurdle rates in adverse scenarios.
- **FR-066**: System MUST support compound scenario effects where PESTLE factors interact (e.g., high oil prices correlating with increased carbon regulation, creating non-linear compound effects on project economics), calculating combined impacts rather than treating factors independently.
- **FR-067**: System MUST provide scenario comparison dashboard showing side-by-side metrics across scenarios (NPV range, ROCE range, projects at risk), calculating probability-weighted portfolio value incorporating scenario likelihoods, and identifying portfolio optimization recommendations (divest vulnerable projects, accelerate resilient projects).
- **FR-068**: System MUST enable Monte Carlo simulation for scenario analysis, defining probability distributions for key PESTLE factors (e.g., oil price following log-normal distribution with mean $70/bbl and volatility 25%), running thousands of simulation iterations, and calculating risk-adjusted portfolio metrics with confidence intervals.

#### Monthly Financial Modeling

- **FR-069**: System MUST allow finance managers to create monthly financial targets for capital expenditure, operating expense by category, and value realization, distributing annual baseline across 12 months with month-specific targets reflecting seasonal patterns and project schedules.
- **FR-070**: System MUST support category-specific monthly profiles, allowing Engineering expense to be front-loaded (high spending Q1-Q2 for design work), Procurement ramping (peak Q2-Q3 for equipment orders), and Construction peaking (high spending Q3-Q4 for construction season), with each category summing to annual baseline.
- **FR-071**: System MUST validate monthly target distributions, ensuring sum of 12 monthly targets equals annual baseline for each category, preventing target distribution errors, and providing visualization of monthly spend curves for review.
- **FR-072**: System MUST track actual spending vs. monthly targets with variance thresholds, generating automated alerts when monthly variance exceeds threshold (e.g., >15% variance), requiring documented variance explanations, and flagging persistent variances (>15% for 3+ consecutive months) for corrective action.
- **FR-073**: System MUST tie value realization targets to project completion milestones, modeling $0 value until project goes live, then stepping up to monthly value delivery based on project performance (e.g., LNG first production in August 2028: $0 Jan-Jul, $32M/month Aug-Dec), and alerting if project delays shift value realization timing.

#### Integration & Data Management

- **FR-074**: System MUST integrate with Primavera P6 or equivalent enterprise project management system, importing schedule data (tasks, milestones, durations, dependencies, critical path), resource data (assignments, loading, availability), and cost data (budget, actual, forecast) via direct database connection, XER file export, or P6 ETL utility.
- **FR-075**: System MUST integrate with SAP or equivalent ERP system, importing financial actuals (general ledger transactions, purchase orders, invoice payments, asset additions), budget data (approved allocations, commitments, encumbrances), and vendor data via direct database connection, OData connectors, or API integration.
- **FR-076**: System MUST integrate with HRIS system to import resource data including employee headcount by skill type, organizational assignments, cost rates (salary, burden, contractor rates), availability (considering planned time off, existing assignments), and skill certifications.
- **FR-077**: System MUST maintain data lineage and audit trail showing source of all data (which system, which table, which timestamp), transformations applied (calculations, aggregations, currency conversions), and data quality metrics (completeness, accuracy, timeliness).
- **FR-078**: System MUST implement data validation rules ensuring capital + expense = total project cost, sum of project budgets ≤ portfolio baseline, sum of portfolio baselines ≤ total enterprise allocation, and resource assignments ≤ resource availability, with constraint violation alerts.

#### Audit & Compliance

- **FR-079**: System MUST maintain complete audit trail of all baseline approvals, project approvals, change request approvals, budget reallocations, and baseline deletions, capturing approver user ID, timestamp, justification text, and before/after values for all changes.
- **FR-080**: System MUST preserve historical data supporting multi-year variance analysis, maintaining prior year baselines, actuals, and forecasts, enabling comparison of current performance against historical performance, and tracking year-over-year improvement trends.
- **FR-081**: System MUST support export of audit data for compliance reporting including Sarbanes-Oxley (SOX) capital expenditure controls, IFRS project accounting, and industry-specific reporting (SEC reserve reporting for oil & gas companies).
- **FR-082**: System MUST implement segregation of duties controls preventing users from approving their own demand submissions, requiring different users for baseline creation vs. approval, and enforcing approval hierarchy (cannot skip approval levels).

### Key Entities

- **Portfolio**: Represents a collection of projects and programs managed as a group to achieve strategic objectives. Key attributes include portfolio name, portfolio manager (owner), business unit, approved baseline (capital allocation, expense allocation by category, scorecard targets), current capital utilization, current expense utilization by category, strategic priorities, and portfolio status. Relationships: Portfolio contains multiple Programs and Projects, Portfolio has one Baseline per fiscal year, Portfolio rolls up to Enterprise level.
- **Program**: Represents a grouping of related projects within a portfolio that share strategic objectives or resource dependencies. Key attributes include program name, program manager (owner), parent portfolio, program objectives, total budget, resource capacity, and program status. Relationships: Program belongs to one Portfolio, Program contains multiple Projects, Program inherits budget from Portfolio allocation.
- **Project**: Represents a temporary endeavor with defined beginning and end, undertaken to create a unique product, service, or result. Key attributes include project ID, project name, project manager, parent program/portfolio, project type (capital project, IT project, etc.), lifecycle status (submitted, approved, planning, executing, closed, on hold), baseline budget (capital, expense by category), actual costs, forecast to complete, earned value metrics (PV, EV, AC, CPI, SPI), schedule (start date, end date, milestones), resource assignments (internal FTEs, external contractors), strategic alignment score, risk rating, and business case (NPV, IRR, payback period, value type). Relationships: Project belongs to one Program or Portfolio, Project has multiple Resource Assignments, Project has multiple Change Requests, Project has Earned Value history, Project delivers Value.
- **Demand**: Represents a request for a new project or program to be evaluated and approved. Key attributes include demand ID, submitter (project manager), submission date, business unit, project description, financial data (capital request, expense by category, expected value, NPV, IRR), timeline (duration, key milestones), resource requirements (FTEs by skill type, contractors), strategic alignment justification, risk assessment, status (draft, submitted, under review, approved, rejected), rejection reason (if applicable), rejection count, and approval history. Relationships: Demand submitted by Project Manager, Demand routed to Program Manager or Portfolio Manager for approval, Demand converts to Project upon approval.
- **Balanced Scorecard**: Represents the strategic measurement framework with KPIs across four perspectives. Key attributes include scorecard ID, owning portfolio, effective date, version number, and perspectives (Financial, Customer, Internal Business Process, Learning & Growth). Relationships: Scorecard belongs to one Portfolio, Scorecard contains multiple KPIs, Scorecard has annual versions.
- **KPI (Key Performance Indicator)**: Represents a measurable value demonstrating effectiveness in achieving objectives. Key attributes include KPI ID, KPI name, description, perspective (Financial/Customer/Internal/Learning), baseline value, target value, actual value (measured), unit of measure, calculation formula, threshold definitions (green >X, amber between X and Y, red <Y), measurement frequency, and data source. Relationships: KPI belongs to one Scorecard, KPI has measurement history over time.
- **Baseline**: Represents an approved financial and performance plan for a specific period. Key attributes include baseline ID, portfolio, fiscal year, approval date, approver (finance manager), baseline status (approved, active, superseded, deleted), capital allocation, expense allocation by category, scorecard targets, and immutability flag (locked from editing). Relationships: Baseline belongs to one Portfolio, Baseline approved by Finance Manager, Baseline has associated Projects consuming allocation.
- **Change Request**: Represents a proposed modification to project scope, schedule, budget, or resources. Key attributes include change request ID, requesting project, requestor (project manager), submission date, change description, impact analysis (scope impact, capital impact, expense impact by category, schedule impact in days, resource impact by skill), business justification, approval workflow status (submitted to program, program approved, submitted to portfolio, portfolio approved, rejected), approver at each level, approval/rejection date, approval/rejection reason, and baseline update flag. Relationships: Change Request belongs to one Project, Change Request routed to Program Manager then Portfolio Manager, Change Request updates Project baseline upon approval.
- **Resource**: Represents a human resource (employee or contractor) available for project assignment. Key attributes include resource ID, name, skill type (petroleum engineer, project manager, geologist, drilling specialist, etc.), organizational unit, cost rate (hourly or daily rate), availability (FTE capacity, e.g., 1.0 for full-time), current utilization percentage, and resource type (internal employee vs. external contractor). Relationships: Resource assigned to multiple Projects through Resource Assignments, Resource pools roll up to Portfolio capacity.
- **Resource Assignment**: Represents allocation of a resource to a specific project for a defined period. Key attributes include assignment ID, resource, project, start date, end date, allocation percentage (e.g., 0.6 FTE = 60% of resource time), budgeted hours/days, actual hours/days, and assignment status (planned, active, completed). Relationships: Resource Assignment links one Resource to one Project, multiple assignments create resource utilization.
- **Value**: Represents benefit delivered by a project, measured after project completion. Key attributes include value ID, project, value type (revenue increase, cost savings, environmental impact, strategic benefit), value description, planned annual value (from business case), actual annual value (measured), start date (when value begins accruing), measurement unit ($/year, tonnes CO2 avoided/year, etc.), and measurement history. Relationships: Value delivered by one Project, Value tracked against business case projections.
- **Scenario**: Represents a set of assumptions about future PESTLE conditions used for portfolio planning. Key attributes include scenario ID, scenario name, scenario description, PESTLE factor assumptions (political factors, economic factors like oil price $/bbl, social factors like labor availability, technological factors like cost reduction %, legal factors like carbon price $/tonne, environmental factors like emissions limits), scenario probability (likelihood of scenario occurring), and calculated results (portfolio NPV under scenario, portfolio ROCE under scenario, projects at risk). Relationships: Scenario applies to one or more Portfolios, Scenario has different project economics calculations.

## Success Criteria *(mandatory)*

### Measurable Outcomes

#### User Adoption & Efficiency

- **SC-001**: Project managers can create and submit a complete demand request for a major capital project (LNG facility, offshore platform, refinery) with all required financial data, resource requirements, and business case justification in under 30 minutes, measured by time from demand creation start to successful submission.
- **SC-002**: Portfolio managers can review and select optimal project portfolio from 15+ demand requests totaling $25B against $12B baseline, evaluating strategic fit and resource constraints, and complete approval decisions for all demands within 4 business days average, measured by timestamp delta between demand submission and final approval/rejection.
- **SC-003**: Finance managers can approve annual baselines for 4 portfolios ($28B total capital across Upstream, Downstream, Petrochemicals, Digital portfolios) with complete Balanced Scorecard targets and category-level expense allocations within 2 hours of final review, measured by time from initiating baseline approval to successful baseline lock.

#### Data Quality & Integration

- **SC-004**: System maintains 99.5% data accuracy comparing project financial actuals in EPPM system to source-of-truth SAP general ledger, measured monthly with automated reconciliation reports showing <0.5% variance.
- **SC-005**: Power BI dashboards refresh within 5 minutes of source transaction posting for 95% of financial transactions, measured by comparing SAP transaction timestamp to Power BI dashboard data refresh timestamp.
- **SC-006**: System prevents 100% of budget over-allocation attempts where portfolio managers try to approve projects exceeding available baseline allocation, measured by enforcement of budget constraint validation in approval workflow.

#### Portfolio Performance & Governance

- **SC-007**: Portfolio managers achieve 85% of projects completing on time, on budget, and on scope (matching industry top-quartile performance), measured by comparing final project outcomes to approved baselines across all closed projects.
- **SC-008**: Average cost overrun for major capital projects reduces from industry average 38% to target 20% or less within 24 months of system implementation, measured by comparing final project cost to original baseline cost across all projects >$100M that reach completion.
- **SC-009**: Change request approval cycle time averages 12 business days or less from submission to final decision, measured by timestamp delta across all change requests, with 90% of change requests receiving decision within 20 business days.
- **SC-010**: System enables identification and deferral of at least $2B in low-strategic-value projects over first year of operation, measured by comparing original demand pipeline ($30B submitted) to approved portfolio ($28B), with documented strategic scoring showing deferred projects scored <60/100 on strategic alignment.

#### Financial Control & Visibility

- **SC-011**: Finance managers reduce variance between monthly planned capital expenditure and actual capital expenditure from ±25% industry baseline to ±10% target, measured by comparing monthly actual spend to monthly financial model targets across all months.
- **SC-012**: System provides consolidated financial statements (Balance Sheet, Income Statement, Cash Flow Statement) updating within 15 minutes of month-end close for 100% of monthly reporting periods, measured by time delta between ERP month-end close timestamp and EPPM financial statement availability.
- **SC-013**: Baseline approval process reduces time to establish annual portfolio plan from historical 6-8 weeks to target 3 weeks or less, measured by elapsed time from finance manager receiving portfolio proposals to final baseline approval and lock.

#### Strategic Alignment & Value Realization

- **SC-014**: Portfolio composition demonstrates measurable improvement in Balanced Scorecard strategic alignment, with average portfolio strategic fit score increasing from baseline 68/100 to target 80/100 within 18 months, measured by weighted average of project strategic alignment scores across approved portfolio.
- **SC-015**: System enables tracking of actual value delivered vs. business case projections for 100% of closed projects, achieving average 85% value realization rate (actual value ≥85% of projected value), measured by comparing actual annual benefits (revenue increase, cost savings) to business case projections 12 months after project completion.
- **SC-016**: Scenario planning capability enables finance managers to complete comprehensive PESTLE analysis with 5 scenarios (base, optimistic, pessimistic, high carbon price, technology breakthrough) evaluating $28B portfolio within 4 hours, measured by time from scenario definition start to completed scenario comparison dashboard.

#### System Performance & Scalability

- **SC-017**: System supports enterprise-scale portfolio management handling 500+ active projects, 1,500+ resources, $50B+ capital under management across 10+ portfolios without performance degradation, maintaining sub-3-second response time for 95% of user interactions.
- **SC-018**: Power BI dashboards support concurrent access by 200+ users (portfolio managers, program managers, finance managers, executives) without performance degradation, maintaining dashboard load time under 10 seconds for 90% of accesses.
- **SC-019**: System integration with Primavera P6 and SAP maintains 99.9% uptime for scheduled data synchronization jobs, with automated alerts if integration failures occur and recovery within 2 hours for 95% of integration issues.

#### Audit & Compliance

- **SC-020**: System maintains complete audit trail for 100% of financial transactions, approvals, baseline changes, and resource allocations, supporting SOX compliance audits with zero audit findings related to capital expenditure controls over 2 consecutive annual audit cycles.
- **SC-021**: Baseline immutability controls prevent 100% of unauthorized baseline modification attempts, measured by system enforcement of baseline lock with zero instances of post-approval baseline edits detected in quarterly compliance reviews.
- **SC-022**: Role-based security implementation prevents 100% of unauthorized data access attempts, measured by security audit logs showing zero successful accesses to data outside user’s authorized scope over any 90-day period.​​​​​​​​​​​​​​​
